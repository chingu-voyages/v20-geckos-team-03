{"ast":null,"code":"var _jsxFileName = \"/Users/yusukeyoshino/Desktop/React/chingu/v20-geckos-team-03/src/components/Cart/Cart.js\";\nimport React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Layout from \"../Layout\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { CardElement, injectStripe } from \"react-stripe-elements\";\nimport classes from \"./Cart.module.css\";\n\nconst Cart = ({\n  stripe\n}) => {\n  const itemsSelector = state => state.addedItems;\n\n  const items = useSelector(itemsSelector);\n\n  const priceSelector = state => state.totalPrice;\n\n  const totalPrice = useSelector(priceSelector);\n  const [status, setStatus] = useState(\"default\"); // submit payment\n\n  const submit = async e => {\n    e.preventDefault();\n    setStatus(\"submitting\");\n\n    try {\n      let {\n        token\n      } = await stripe.createToken({\n        name: \"Name\"\n      });\n      let response = await fetch(\"/.netlify/functions/charge\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          amount: totalPrice * 100,\n          token: token.id\n        })\n      });\n\n      if (response.ok) {\n        setStatus(\"complete\");\n      } else {\n        throw new Error(\"Network response was not ok.\");\n      }\n    } catch (err) {\n      setStatus(\"error\");\n    }\n  };\n\n  if (status === \"complete\") {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"CheckoutForm-complete\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 12\n      }\n    }, \"Payment successful!\");\n  } // render added items\n\n\n  let addedItems = items.length ? items.map(item => {\n    console.log(item);\n    return /*#__PURE__*/React.createElement(\"li\", {\n      className: classes.item,\n      key: item.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.item_img,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: item.img,\n      alt: item.img,\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.description,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: classes.item_name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }\n    }, item.name), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    }, item.desc), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 15\n      }\n    }, \"Price: \", item.price, \"$\")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 15\n      }\n    }, \"QTY: \", item.qty)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }\n    }, \"arrow_drop_up\")), /*#__PURE__*/React.createElement(Link, {\n      to: \"/cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }\n    }, \"arrow_drop_down\"))), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }\n    }, \"Remove\")));\n  }) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, \"Nothing.\");\n  return /*#__PURE__*/React.createElement(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, \"You have ordered:\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"collection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, addedItems)), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.total_price,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, \"TOTAL: \", totalPrice, \" $\")), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: submit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, \"Would you like to complete the purchase?\"), /*#__PURE__*/React.createElement(CardElement, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    disabled: status === \"submitting\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, status === \"submitting\" ? \"Submitting\" : \"Submit Order\"), status === \"error\" && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"CheckoutForm-error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, \"Something went wrong.\"))));\n};\n\nexport default injectStripe(Cart);","map":{"version":3,"sources":["/Users/yusukeyoshino/Desktop/React/chingu/v20-geckos-team-03/src/components/Cart/Cart.js"],"names":["React","useState","Link","Layout","useDispatch","useSelector","CardElement","injectStripe","classes","Cart","stripe","itemsSelector","state","addedItems","items","priceSelector","totalPrice","status","setStatus","submit","e","preventDefault","token","createToken","name","response","fetch","method","body","JSON","stringify","amount","id","ok","Error","err","length","map","item","console","log","item_img","img","description","item_name","desc","price","qty","total_price"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Layout from \"../Layout\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { CardElement, injectStripe } from \"react-stripe-elements\";\nimport classes from \"./Cart.module.css\";\n\nconst Cart = ({ stripe }) => {\n  const itemsSelector = (state) => state.addedItems;\n  const items = useSelector(itemsSelector);\n  const priceSelector = (state) => state.totalPrice;\n  const totalPrice = useSelector(priceSelector);\n  const [status, setStatus] = useState(\"default\");\n\n  // submit payment\n  const submit = async (e) => {\n    e.preventDefault();\n\n    setStatus(\"submitting\");\n    try {\n      let { token } = await stripe.createToken({ name: \"Name\" });\n\n      let response = await fetch(\"/.netlify/functions/charge\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          amount: totalPrice * 100,\n          token: token.id,\n        }),\n      });\n\n      if (response.ok) {\n        setStatus(\"complete\");\n      } else {\n        throw new Error(\"Network response was not ok.\");\n      }\n    } catch (err) {\n      setStatus(\"error\");\n    }\n  };\n\n  if (status === \"complete\") {\n    return <div className=\"CheckoutForm-complete\">Payment successful!</div>;\n  }\n\n  // render added items\n  let addedItems = items.length ? (\n    items.map((item) => {\n      console.log(item);\n      return (\n        <li className={classes.item} key={item.id}>\n          <div className={classes.item_img}>\n            <img src={item.img} alt={item.img} className=\"\" />\n          </div>\n\n          <div className={classes.description}>\n            <span className={classes.item_name}>{item.name}</span>\n            <p>{item.desc}</p>\n            <p>\n              <b>Price: {item.price}$</b>\n            </p>\n            <p>\n              <b>QTY: {item.qty}</b>\n            </p>\n            <div className=\"\">\n              <Link to=\"/cart\">\n                <i className=\"material-icons\">arrow_drop_up</i>\n              </Link>\n              <Link to=\"/cart\">\n                <i className=\"material-icons\">arrow_drop_down</i>\n              </Link>\n            </div>\n            <button className=\"\">Remove</button>\n          </div>\n        </li>\n      );\n    })\n  ) : (\n    <p>Nothing.</p>\n  );\n\n  return (\n    <Layout>\n      <div className=\"container\">\n        <div className=\"cart\">\n          <h5>You have ordered:</h5>\n          <ul className=\"collection\">{addedItems}</ul>\n        </div>\n        <div className={classes.total_price}>\n          <p>TOTAL: {totalPrice} $</p>\n        </div>\n        <form onSubmit={submit}>\n          <h4>Would you like to complete the purchase?</h4>\n          <CardElement />\n          <button type=\"submit\" disabled={status === \"submitting\"}>\n            {status === \"submitting\" ? \"Submitting\" : \"Submit Order\"}\n          </button>\n          {status === \"error\" && (\n            <div className=\"CheckoutForm-error\">Something went wrong.</div>\n          )}\n        </form>\n      </div>\n    </Layout>\n  );\n};\n\nexport default injectStripe(Cart);\n"]},"metadata":{},"sourceType":"module"}